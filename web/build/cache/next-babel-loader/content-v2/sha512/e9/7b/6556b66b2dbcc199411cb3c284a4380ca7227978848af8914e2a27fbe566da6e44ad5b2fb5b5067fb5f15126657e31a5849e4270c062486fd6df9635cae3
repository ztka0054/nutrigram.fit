{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\alex9\\\\Nutrigram_Web\\\\web\\\\contexts\\\\AppAuth.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext, useMemo } from \"react\";\nimport { setToken, getToken, removeToken } from \"../utils/localStorage\";\nimport { setPic, getPic, removePic } from \"../utils/localStorage\";\nimport { setIdNutritionist, getIdNutritionist, removeIdNutritionist } from \"../utils/localStorage\"; //Context\n\nexport var AppContext = /*#__PURE__*/createContext(null); //Provider\n\nvar AppContextProvider = function AppContextProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState(undefined),\n      auth = _useState[0],\n      setAuth = _useState[1];\n\n  var _useState2 = useState(false),\n      flagLogin = _useState2[0],\n      setFlagLogin = _useState2[1];\n\n  var _useState3 = useState(false),\n      reloadUser = _useState3[0],\n      setReloadUser = _useState3[1];\n\n  var _useState4 = useState(false),\n      isReady = _useState4[0],\n      setIsReady = _useState4[1];\n\n  useEffect(function () {\n    var token = getToken();\n    var picture = getPic();\n    var idNutritionist = getIdNutritionist();\n\n    if (token) {\n      setAuth({\n        token: token,\n        picture: picture,\n        idNutritionist: idNutritionist\n      });\n      setFlagLogin(true);\n    } else {\n      setAuth(null);\n      setFlagLogin(false);\n    }\n\n    setReloadUser(false);\n    setIsReady(true);\n  }, [reloadUser, isReady]);\n\n  var login = function login(user) {\n    setFlagLogin(true);\n    setToken(user.token);\n    setPic(user.picture);\n    setIdNutritionist(user.id);\n    setAuth({\n      token: user.token,\n      picture: user.picture,\n      idNutritionist: user.id\n    });\n  };\n\n  var logout = function logout() {\n    if (auth) {\n      removeToken();\n      removePic();\n      removeIdNutritionist();\n      setAuth(null);\n      setFlagLogin(false);\n    }\n  };\n\n  var authData = useMemo(function () {\n    return {\n      auth: auth,\n      flagLogin: flagLogin,\n      login: login,\n      logout: logout,\n      setReloadUser: setReloadUser,\n      isReady: isReady\n    };\n  }, [auth, isReady]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: authData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(AppContextProvider, \"kPCZrmxSrteRPBB3HFEwZyrhqVE=\");\n\n_c = AppContextProvider;\nexport default AppContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppContextProvider\");","map":{"version":3,"sources":["C:/Users/alex9/Nutrigram_Web/web/contexts/AppAuth.js"],"names":["React","useState","useEffect","createContext","useMemo","setToken","getToken","removeToken","setPic","getPic","removePic","setIdNutritionist","getIdNutritionist","removeIdNutritionist","AppContext","AppContextProvider","children","undefined","auth","setAuth","flagLogin","setFlagLogin","reloadUser","setReloadUser","isReady","setIsReady","token","picture","idNutritionist","login","user","id","logout","authData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createContext, useMemo } from \"react\";\r\nimport { setToken, getToken, removeToken } from \"../utils/localStorage\";\r\nimport { setPic, getPic, removePic } from \"../utils/localStorage\";\r\nimport {\r\n    setIdNutritionist,\r\n    getIdNutritionist,\r\n    removeIdNutritionist,\r\n} from \"../utils/localStorage\";\r\n\r\n//Context\r\nexport const AppContext = createContext(null);\r\n\r\n//Provider\r\nconst AppContextProvider = ({ children }) => {\r\n    const [auth, setAuth] = useState(undefined);\r\n    const [flagLogin, setFlagLogin] = useState(false);\r\n    const [reloadUser, setReloadUser] = useState(false);\r\n    const [isReady, setIsReady] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const token = getToken();\r\n        const picture = getPic();\r\n        const idNutritionist = getIdNutritionist();\r\n        if (token) {\r\n            setAuth({ token, picture, idNutritionist });\r\n            setFlagLogin(true);\r\n        } else {\r\n            setAuth(null);\r\n            setFlagLogin(false);\r\n        }\r\n        setReloadUser(false);\r\n        setIsReady(true);\r\n    }, [reloadUser, isReady]);\r\n\r\n    const login = (user) => {\r\n        setFlagLogin(true);\r\n        setToken(user.token);\r\n        setPic(user.picture);\r\n        setIdNutritionist(user.id);\r\n        setAuth({\r\n            token: user.token,\r\n            picture: user.picture,\r\n            idNutritionist: user.id,\r\n        });\r\n    };\r\n\r\n    const logout = () => {\r\n        if (auth) {\r\n            removeToken();\r\n            removePic();\r\n            removeIdNutritionist();\r\n            setAuth(null);\r\n            setFlagLogin(false);\r\n        }\r\n    };\r\n\r\n    const authData = useMemo(\r\n        () => ({\r\n            auth,\r\n            flagLogin,\r\n            login,\r\n            logout,\r\n            setReloadUser,\r\n            isReady,\r\n        }),\r\n        [auth, isReady]\r\n    );\r\n\r\n    return (\r\n        <AppContext.Provider value={authData}>{children}</AppContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AppContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}