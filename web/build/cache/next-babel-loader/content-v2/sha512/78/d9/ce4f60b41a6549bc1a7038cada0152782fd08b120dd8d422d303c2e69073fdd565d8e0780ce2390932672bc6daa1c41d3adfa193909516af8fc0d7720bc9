{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport moment from \"moment\";\nimport { size } from \"lodash\";\nimport useApp from \"../../../../../../hooks/useApp\";\nimport ModalDelete from \"../../../../../modules/Dashboard/Table/ModalDelete\";\nimport request from \"../../../../../../helper/core_services/core/requestService\";\nimport blog from \"../../../../../../helper/core_services/endpoints/blog\";\nimport consulation from \"../../../../../../helper/core_services/endpoints/consulation\";\nimport { loadElement } from \"../../../../../../helper/appearance/load\";\nimport fixDate from \"../../../../../../helper/date/fixDateTimeService\";\nexport default function Rows(_ref) {\n  var row = _ref.row,\n      UpdateTable = _ref.UpdateTable;\n  var router = useRouter();\n\n  var _useApp = useApp(),\n      locale = _useApp.locale;\n\n  var _useState = useState(false),\n      flagModal = _useState[0],\n      setFlagModal = _useState[1];\n\n  var _useState2 = useState(null),\n      idElement = _useState2[0],\n      setIdElement = _useState2[1];\n\n  var _useState3 = useState(null),\n      datePast = _useState3[0],\n      setDatePast = _useState3[1];\n\n  var _useState4 = useState(null),\n      dateNext = _useState4[0],\n      setDateNExt = _useState4[1];\n\n  useEffect(function () {\n    getPastConsulation();\n  }, []);\n  useEffect(function () {\n    getNextConsulation();\n  }, []);\n\n  var getPastConsulation = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var reqLast;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request(consulation.get_consulations, {\n                ordering: \"-datetime\",\n                datetime__lte: \"\".concat(moment().format(\"YYYY-MM-DDTHH:MM:ss\")),\n                page_size: 1\n              }, [row.id], {\n                locale: locale\n              });\n\n            case 2:\n              reqLast = _context.sent;\n              if (reqLast != null) if (size(reqLast.result) > 0) setDatePast(fixDate(reqLast.result[0].datetime).format(\"YYYY-MM-DD\"));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getPastConsulation() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getNextConsulation = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var reqLast;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return request(consulation.get_consulations, {\n                ordering: \"datetime\",\n                datetime__gte: \"\".concat(moment().format(\"YYYY-MM-DDTHH:MM:ss\")),\n                page_size: 1\n              }, [row.id], {\n                locale: locale\n              });\n\n            case 2:\n              reqLast = _context2.sent;\n              if (reqLast != null) if (size(reqLast.result) > 0) setDateNExt(fixDate(reqLast.result[0].datetime).format(\"YYYY-MM-DD\"));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getNextConsulation() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var ShowDetail = function ShowDetail(id) {\n    router.push(\"/dashboard/patients/detail/\".concat(id));\n  };\n\n  var ShowModal = function ShowModal(id) {\n    toogleModal();\n    setIdElement(id);\n  };\n\n  var DeleteRow = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var req;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              toogleModal();\n              loadElement(true);\n              _context3.next = 4;\n              return request(blog.delete_blog, {}, [idElement], {\n                locale: locale\n              });\n\n            case 4:\n              req = _context3.sent;\n              loadElement(false);\n\n              if (req != null) {\n                UpdateTable();\n              }\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function DeleteRow() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var toogleModal = function toogleModal() {\n    setFlagModal(!flagModal);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"tr\", {\n      onClick: function onClick() {\n        return ShowDetail(row.id);\n      },\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        children: \"\".concat(row.firstName, \" \").concat(row.lastName)\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: row.birthday\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: row.email\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: row.phone\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: datePast\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: dateNext\n      })]\n    }), /*#__PURE__*/_jsx(ModalDelete, {\n      flagModal: flagModal,\n      toogleModalChild: toogleModal,\n      functionButton: DeleteRow\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}