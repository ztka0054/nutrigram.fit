{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport useApp from \"../../../../hooks/useApp\";\nimport useAuth from \"../../../../hooks/useAuth\";\nimport SetLink from \"../../../modules/SetLink\";\nimport TagLang from \"../../../modules/GetTagLang\";\nimport MessageValidation from \"../../../modules/Forms/MessageValidation\";\nimport GetLanguage from \"../../../../helper/i18n/getValueTagLang\";\nimport request from \"../../../../helper/core_services/core/requestService\";\nimport nutri from \"../../../../helper/core_services/endpoints/nutritionist\";\nimport subscription from \"../../../../helper/core_services/endpoints/subscription\";\nexport default function FormLogin() {\n  var router = useRouter();\n\n  var _useApp = useApp(),\n      locale = _useApp.locale;\n\n  var _useAuth = useAuth(),\n      login = _useAuth.login;\n\n  var formik = useFormik({\n    validateOnChange: false,\n    initialValues: initialValues(),\n    validationSchema: Yup.object(validationSchema()),\n    onSubmit: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData, _ref) {\n        var resetForm;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                resetForm = _ref.resetForm;\n                SendForm(formData, resetForm);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function onSubmit(_x, _x2) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  });\n\n  var SendForm = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(formData, resetForm) {\n      var responseLogin;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return request(nutri.post_login, formData, null, {\n                locale: locale\n              });\n\n            case 2:\n              responseLogin = _context2.sent;\n\n              if (responseLogin != null) {\n                login(responseLogin);\n                resetForm(initialValues()); // router.push(\"/dashboard/patients\");\n\n                GetPlan();\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function SendForm(_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var GetPlan = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var responseSubscription;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return request(subscription.get_subscription, null, null, {\n                locale: locale\n              }, false);\n\n            case 2:\n              responseSubscription = _context3.sent;\n\n              if (responseSubscription != null) {\n                router.push(\"/dashboard/patients\");\n              } else {\n                router.push(\"/signup_step_4\");\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function GetPlan() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"form\", {\n    onSubmit: formik.handleSubmit,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"sty-title-1\",\n      children: /*#__PURE__*/_jsx(TagLang, {\n        group: \"login\",\n        tag: \"title_1\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"sty-cont-input-1\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"sty-input-1\",\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          name: \"email\",\n          value: formik.values.email,\n          onChange: formik.handleChange,\n          type: \"text\",\n          placeholder: GetLanguage(\"input\", \"email\")\n        }), /*#__PURE__*/_jsx(MessageValidation, {\n          error: formik.errors.email\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"sty-cont-input-1\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"sty-input-1\",\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          name: \"password\",\n          value: formik.values.password,\n          onChange: formik.handleChange,\n          type: \"password\",\n          placeholder: GetLanguage(\"input\", \"password\")\n        }), /*#__PURE__*/_jsx(MessageValidation, {\n          error: formik.errors.password\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsx(\"button\", {\n        className: \"sty-button-sec-1\",\n        type: \"submit\",\n        children: /*#__PURE__*/_jsx(TagLang, {\n          group: \"button\",\n          tag: \"tag_t_1_4\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"sty-cont-link-1\",\n      children: /*#__PURE__*/_jsx(SetLink, {\n        route: \"/recovery\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"sty-link-1 link text-right\",\n          children: /*#__PURE__*/_jsx(TagLang, {\n            group: \"login\",\n            tag: \"sub_1\"\n          })\n        })\n      })\n    })]\n  });\n}\n\nfunction initialValues() {\n  return {\n    email: \"\",\n    password: \"\"\n  };\n}\n\nfunction validationSchema() {\n  return {\n    email: Yup.string().email().required(\"required\"),\n    password: Yup.string().required(\"required\")\n  };\n}","map":null,"metadata":{},"sourceType":"module"}