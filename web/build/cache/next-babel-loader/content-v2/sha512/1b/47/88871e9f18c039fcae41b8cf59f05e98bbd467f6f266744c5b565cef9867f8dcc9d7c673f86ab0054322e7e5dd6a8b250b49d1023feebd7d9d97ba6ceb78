{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from \"react\";\nimport { map, size } from \"lodash\";\nimport TagLang from \"../../../../modules/GetTagLang\";\nimport InputText from \"../../../../components/Inputs/InputTypeForm_1/InputTextForm_1\";\nimport InputNumber from \"../../../../components/Inputs/InputTypeForm_1/InputNumber_1\";\nimport InputSelect from \"../../../../components/Inputs/InputTypeForm_1/InputSelectForm_1\";\nimport InputCheckForm from \"../../../../components/Inputs/InputTypeForm_1/InputCheckForm_1\";\nimport IconClose from \"../../../../components/Icons/Close\";\nimport MessageValidation from \"../../../../modules/Forms/MessageValidation\";\nimport style from \"./portionelement.module.scss\";\nexport default function PortionElementForm({\n  formik,\n  arrayHelpers,\n  father,\n  cataloguePortionsInfo\n}) {\n  var _formik$errors;\n\n  const {\n    0: indexSelectCheck,\n    1: setIndexSelectCheck\n  } = useState(0);\n  useEffect(() => {\n    if (size(formik.values[father]) == 1) {\n      formik.setFieldValue(`${father}[0].defaultPortion`, true);\n      setIndexSelectCheck(0);\n    }\n\n    if (size(formik.values[father]) > 1) {\n      let indexes = formik.values[father].map((portion, i) => portion.defaultPortion === true ? i : null).filter(i => i !== null);\n\n      if (size(indexes) > 1) {\n        map(indexes, element => {\n          if (element == indexSelectCheck) formik.setFieldValue(`${father}[${element}].defaultPortion`, false);\n          if (element != indexSelectCheck) setIndexSelectCheck(element);\n        });\n      }\n\n      if (size(indexes) == 0) {\n        formik.setFieldValue(`${father}[0].defaultPortion`, true);\n        setIndexSelectCheck(0);\n      }\n    }\n  }, [formik.values[father]]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [map(formik.values[father], (content, index) => {\n      var _formik$errors$father, _formik$errors$father2, _formik$errors$father3, _formik$errors$father4, _formik$errors$father5, _formik$errors$father6;\n\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.content,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: style.title,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: style.tag,\n            children: /*#__PURE__*/_jsx(TagLang, {\n              group: \"input\",\n              tag: \"portion\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: style.icon,\n            onClick: () => arrayHelpers.remove(index),\n            children: /*#__PURE__*/_jsx(IconClose, {})\n          })]\n        }), /*#__PURE__*/_jsx(InputSelect, {\n          formik: formik,\n          title: \"unity\",\n          name: `${father}[${index}].info`,\n          value: formik.values[father][index].info,\n          elements: cataloguePortionsInfo,\n          error: formik === null || formik === void 0 ? void 0 : (_formik$errors$father = formik.errors[father]) === null || _formik$errors$father === void 0 ? void 0 : (_formik$errors$father2 = _formik$errors$father[index]) === null || _formik$errors$father2 === void 0 ? void 0 : _formik$errors$father2.info\n        }), /*#__PURE__*/_jsx(InputNumber, {\n          type: \"number\",\n          formik: formik,\n          title: \"weight\",\n          name: `${father}[${index}].weight`,\n          value: formik.values[father][index].weight,\n          error: formik === null || formik === void 0 ? void 0 : (_formik$errors$father3 = formik.errors[father]) === null || _formik$errors$father3 === void 0 ? void 0 : (_formik$errors$father4 = _formik$errors$father3[index]) === null || _formik$errors$father4 === void 0 ? void 0 : _formik$errors$father4.weight\n        }), /*#__PURE__*/_jsx(InputNumber, {\n          type: \"number\",\n          formik: formik,\n          title: \"suggestedQuantity\",\n          name: `${father}[${index}].suggestedQuantity`,\n          value: formik.values[father][index].suggestedQuantity,\n          error: formik === null || formik === void 0 ? void 0 : (_formik$errors$father5 = formik.errors[father]) === null || _formik$errors$father5 === void 0 ? void 0 : (_formik$errors$father6 = _formik$errors$father5[index]) === null || _formik$errors$father6 === void 0 ? void 0 : _formik$errors$father6.suggestedQuantity\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: style.contCheck,\n          children: /*#__PURE__*/_jsx(InputCheckForm, {\n            formik: formik,\n            title: \"defaultPortion\",\n            name: `${father}[${index}].defaultPortion`,\n            value: formik.values[father][index].defaultPortion\n          })\n        })]\n      }, `direction_${index}`);\n    }), typeof ((_formik$errors = formik.errors) === null || _formik$errors === void 0 ? void 0 : _formik$errors.portions) === \"string\" && /*#__PURE__*/_jsx(\"div\", {\n      className: \"validation-array\",\n      id: \"field_error\",\n      children: /*#__PURE__*/_jsx(MessageValidation, {\n        error: formik.errors.portions\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"row justify-content-end\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-6\",\n        children: /*#__PURE__*/_jsxs(\"button\", {\n          className: \"sty-button-dash-1 fix-25\",\n          type: \"button\",\n          onClick: () => arrayHelpers.push({\n            category: \"\",\n            weight: \"\",\n            suggestedQuantity: \"\",\n            defaultPortion: false\n          }),\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"sty-icon\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: \"/static/img/favicons/app/add_w.svg\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"sty-tag\",\n            children: /*#__PURE__*/_jsx(TagLang, {\n              group: \"button\",\n              tag: \"add\"\n            })\n          })]\n        })\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}