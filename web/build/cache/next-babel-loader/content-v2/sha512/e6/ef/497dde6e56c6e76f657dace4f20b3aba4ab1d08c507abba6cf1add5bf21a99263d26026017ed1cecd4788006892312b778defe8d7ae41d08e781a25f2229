{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { useFormik, FieldArray, FormikProvider } from \"formik\";\nimport * as Yup from \"yup\";\nimport useApp from \"../../../../../../hooks/useApp\";\nimport TagLang from \"../../../../../modules/GetTagLang\";\nimport MessageValidation from \"../../../../../modules/Forms/MessageValidation\";\nimport GetLanguages from \"../../../../../../helper/i18n/getValueTagLang\";\nimport request from \"../../../../../../helper/core_services/core/requestService\";\nimport patient from \"../../../../../../helper/core_services/endpoints/patients\";\nimport { loadElement } from \"../../../../../../helper/appearance/load\";\nimport FieldPic from \"../../../../../../helper/forms/elements/pic\";\nimport FieldSelect from \"../../../../../../helper/forms/elements/select\";\nimport FieldDate from \"../../../../../../helper/forms/elements/date\";\nexport default function Detail(_ref) {\n  var _ref$idPatient = _ref.idPatient,\n      idPatient = _ref$idPatient === void 0 ? null : _ref$idPatient,\n      setFormUser = _ref.setFormUser,\n      setInfoUser = _ref.setInfoUser,\n      setFlagGinecology = _ref.setFlagGinecology;\n\n  var _useApp = useApp(),\n      locale = _useApp.locale;\n\n  var _useState = useState([]),\n      selectGender = _useState[0],\n      setSelectGender = _useState[1];\n\n  var formik = useFormik({\n    validateOnChange: false,\n    initialValues: initialValues(),\n    validationSchema: Yup.object(validationSchema()),\n    onSubmit: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData, _ref2) {\n        var resetForm, formNew;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                resetForm = _ref2.resetForm;\n                formNew = _objectSpread({}, formData);\n                if (formNew.picture == \"\" || formNew.picture == null) delete formNew.picture;\n                if (idPatient == null) SendForm(formNew);\n                if (idPatient != null) UpdateForm(formNew);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function onSubmit(_x, _x2) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  });\n  useEffect(function () {\n    setFormUser(formik);\n  }, []);\n  useEffect(function () {\n    if (idPatient != null) getInformation();\n  }, [idPatient]);\n  useEffect(function () {\n    if ((formik === null || formik === void 0 ? void 0 : formik.values[\"gender\"]) == \"1\") setFlagGinecology(true);else setFlagGinecology(false);\n  }, [formik === null || formik === void 0 ? void 0 : formik.values]);\n  useEffect(function () {\n    setSelectGender([{\n      id: 2,\n      name: GetLanguages(\"input\", \"Male\")\n    }, {\n      id: 1,\n      name: GetLanguages(\"input\", \"Female\")\n    }]);\n  }, [locale]);\n\n  var getInformation = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var req;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return request(patient.get_patient, null, [idPatient], {\n                locale: locale\n              });\n\n            case 2:\n              req = _context2.sent;\n              if (req != null) formik.setValues(req);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getInformation() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var SendForm = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData) {\n      var req;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              loadElement(true);\n              _context3.next = 3;\n              return request(patient.post_new_patients, formData, null, {\n                locale: locale\n              });\n\n            case 3:\n              req = _context3.sent;\n              loadElement(false);\n\n              if (req != null) {\n                setInfoUser(req);\n              }\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function SendForm(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var UpdateForm = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(formData) {\n      var req;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              loadElement(true);\n              _context4.next = 3;\n              return request(patient.patch_patient, formData, [idPatient], {\n                locale: locale\n              });\n\n            case 3:\n              req = _context4.sent;\n              loadElement(false);\n\n              if (req != null) {\n                setInfoUser(req);\n              }\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function UpdateForm(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(\"form\", {\n    onSubmit: formik.handleSubmit,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-5\",\n        children: /*#__PURE__*/_jsx(FieldPic, {\n          formik: formik,\n          name: \"picture\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-7\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-cont-input-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"sty-tag\",\n                  children: /*#__PURE__*/_jsx(TagLang, {\n                    group: \"input\",\n                    tag: \"name\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-input\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    name: \"firstName\",\n                    value: formik.values.firstName,\n                    onChange: formik.handleChange,\n                    type: \"text\"\n                  }), /*#__PURE__*/_jsx(MessageValidation, {\n                    error: formik.errors.firstName\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-cont-input-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"sty-tag\",\n                  children: /*#__PURE__*/_jsx(TagLang, {\n                    group: \"input\",\n                    tag: \"lastName\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-input\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    name: \"lastName\",\n                    value: formik.values.lastName,\n                    onChange: formik.handleChange,\n                    type: \"text\"\n                  }), /*#__PURE__*/_jsx(MessageValidation, {\n                    error: formik.errors.lastName\n                  })]\n                })]\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-cont-input-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"sty-tag\",\n                  children: /*#__PURE__*/_jsx(TagLang, {\n                    group: \"input\",\n                    tag: \"gender\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-input\",\n                  children: [/*#__PURE__*/_jsx(FieldSelect, {\n                    formik: formik,\n                    name: \"gender\",\n                    elements: selectGender\n                  }), /*#__PURE__*/_jsx(MessageValidation, {\n                    error: formik.errors.gender\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-cont-input-2\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"sty-tag\",\n                  children: /*#__PURE__*/_jsx(TagLang, {\n                    group: \"input\",\n                    tag: \"dateBirth\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-input sty-boots-calendar-1\",\n                  children: [/*#__PURE__*/_jsx(FieldDate, {\n                    formik: formik,\n                    name: \"birthday\"\n                  }), /*#__PURE__*/_jsx(MessageValidation, {\n                    error: formik.errors.birthday\n                  })]\n                })]\n              })\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-12\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-4\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"sty-cont-input-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"sty-tag\",\n                children: /*#__PURE__*/_jsx(TagLang, {\n                  group: \"input\",\n                  tag: \"profession\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-input\",\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  name: \"profession\",\n                  value: formik.values.profession,\n                  onChange: formik.handleChange,\n                  type: \"text\"\n                }), /*#__PURE__*/_jsx(MessageValidation, {\n                  error: formik.errors.profession\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-4\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"sty-cont-input-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"sty-tag\",\n                children: /*#__PURE__*/_jsx(TagLang, {\n                  group: \"input\",\n                  tag: \"email\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-input\",\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  name: \"email\",\n                  value: formik.values.email,\n                  onChange: formik.handleChange,\n                  type: \"text\"\n                }), /*#__PURE__*/_jsx(MessageValidation, {\n                  error: formik.errors.email\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-4\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"sty-cont-input-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"sty-tag\",\n                children: /*#__PURE__*/_jsx(TagLang, {\n                  group: \"input\",\n                  tag: \"phone\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-input\",\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  name: \"phone\",\n                  value: formik.values.phone,\n                  onChange: formik.handleChange,\n                  type: \"text\"\n                }), /*#__PURE__*/_jsx(MessageValidation, {\n                  error: formik.errors.phone\n                })]\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"sty-cont-input-2\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"sty-tag\",\n                children: /*#__PURE__*/_jsx(TagLang, {\n                  group: \"input\",\n                  tag: \"notes\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-input\",\n                children: [/*#__PURE__*/_jsx(\"textarea\", {\n                  name: \"notes\",\n                  value: formik.values.notes,\n                  onChange: formik.handleChange,\n                  rows: 3\n                }), /*#__PURE__*/_jsx(MessageValidation, {\n                  error: formik.errors.notes\n                })]\n              })]\n            })\n          })\n        })]\n      })]\n    })\n  });\n}\n\nfunction initialValues() {\n  return {\n    picture: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    gender: \"\",\n    birthday: \"\",\n    profession: \"\",\n    email: \"\",\n    phone: \"\",\n    notes: \"\"\n  };\n}\n\nfunction validationSchema() {\n  return {\n    firstName: Yup.string().required(\"required\"),\n    lastName: Yup.string().required(\"required\"),\n    gender: Yup.string().required(\"required\"),\n    birthday: Yup.string().required(\"required\"),\n    profession: Yup.string().required(\"required\"),\n    email: Yup.string().email().required(\"required\"),\n    phone: Yup.string().required(\"required\")\n  };\n}","map":null,"metadata":{},"sourceType":"module"}