{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { size } from \"lodash\";\nimport moment from \"moment\";\nimport useApp from \"../../../../../../hooks/useApp\";\nimport TagLang from \"../../../../../modules/GetTagLang\";\nimport SetLink from \"../../../../../modules/SetLink\";\nimport request from \"../../../../../../helper/core_services/core/requestService\";\nimport patient from \"../../../../../../helper/core_services/endpoints/patients\";\nimport consulation from \"../../../../../../helper/core_services/endpoints/consulation\";\nimport medical from \"../../../../../../helper/core_services/endpoints/medical_records\";\nimport apiMenu from \"../../../../../../helper/core_services/endpoints/menu\";\nimport GetLanguages from \"../../../../../../helper/i18n/getValueTagLang\";\nimport fixDate from \"../../../../../../helper/date/fixDateTimeService\";\nimport Notes from \"./Notes\";\nconst pic = \"/static/img/favicons/app/human.png\";\nexport default function index({\n  dataPatient\n}) {\n  const {\n    query\n  } = useRouter();\n  const {\n    locale,\n    flagChangeElement\n  } = useApp();\n  const {\n    0: statePic,\n    1: setStatePic\n  } = useState(pic); // const [dataPatient, setDataPatient] = useState({});\n\n  const {\n    0: infoPatient,\n    1: setInfoPatient\n  } = useState({});\n  const {\n    0: alimentPlan,\n    1: setAlimentPlan\n  } = useState(null);\n  const {\n    0: firstWeight,\n    1: setFirstWeight\n  } = useState(null);\n  const {\n    0: lastWeight,\n    1: setLastWeight\n  } = useState(null);\n  const {\n    0: firstFat,\n    1: setFirstFat\n  } = useState(null);\n  const {\n    0: lastFat,\n    1: setLastFat\n  } = useState(null);\n  useEffect(() => {\n    if (dataPatient != null) {\n      GetMenu();\n      GetInfoPatient();\n    }\n  }, [dataPatient]);\n  useEffect(() => {\n    if (dataPatient != null) {\n      GetConsulation();\n    }\n  }, [dataPatient]);\n\n  const GetInfoPatient = async () => {\n    let suffering = await GetSuffering();\n    setInfoPatient(_objectSpread({}, suffering));\n  };\n\n  const GetSuffering = async () => {\n    let suffering = \"\";\n    let reason = \"\";\n    let req = await request(medical.get_medical, null, [query.id], {\n      locale\n    });\n\n    if (req != null) {\n      let arraySuffering = [];\n      if (req !== null && req !== void 0 && req.diarrhea) arraySuffering.push(GetLanguages(\"input\", \"diarrhea\"));\n      if (req !== null && req !== void 0 && req.constipation) arraySuffering.push(GetLanguages(\"input\", \"constipation\"));\n      if (req !== null && req !== void 0 && req.gastritis) arraySuffering.push(GetLanguages(\"input\", \"gastritis\"));\n      if (req !== null && req !== void 0 && req.ulcer) arraySuffering.push(GetLanguages(\"input\", \"ulcer\"));\n      if (req !== null && req !== void 0 && req.nausea) arraySuffering.push(GetLanguages(\"input\", \"nausea\"));\n      if (req !== null && req !== void 0 && req.pyrosis) arraySuffering.push(GetLanguages(\"input\", \"pyrosis\"));\n      if (req !== null && req !== void 0 && req.vomit) arraySuffering.push(GetLanguages(\"input\", \"vomit\"));\n      if (req !== null && req !== void 0 && req.colitis) arraySuffering.push(GetLanguages(\"input\", \"colitis\"));\n      suffering = arraySuffering.join(\", \");\n      if (req !== null && req !== void 0 && req.reason) reason = req.reason;\n    }\n\n    return {\n      suffering,\n      reason\n    };\n  };\n\n  const GetMenu = async () => {\n    if (dataPatient.menu != null) {\n      let req = await request(apiMenu.get_menu_patient, null, [dataPatient.menu], {\n        locale\n      });\n\n      if (req != null) {\n        let req1 = await request(apiMenu.get_menu, null, [req.menu], {\n          locale\n        });\n        setAlimentPlan(req1.name);\n      }\n    }\n  };\n\n  const GetConsulation = async () => {\n    let reqFirst = await request(consulation.get_consulations, {\n      ordering: \"datetime\",\n      page_size: 1\n    }, [query.id], {\n      locale\n    });\n    let reqLast = await request(consulation.get_consulations, {\n      ordering: \"-datetime\",\n      datetime__lt: `${moment().format(\"YYYY-MM-DD\")}T23:59:59`,\n      page_size: 1\n    }, [query.id], {\n      locale\n    });\n\n    if (size(reqFirst.result) > 0) {\n      let reqOne = await request(consulation.get_consulation, null, [query.id, reqFirst.result[0].id], {\n        locale\n      });\n\n      if (reqOne != null) {\n        PutFirstWightAndFat(reqOne.anthropometry.measurements);\n      }\n    }\n\n    if (size(reqLast.result) > 0) {\n      let reqOne = await request(consulation.get_consulation, null, [query.id, reqLast.result[0].id], {\n        locale\n      });\n\n      if (reqOne != null) {\n        PutLastWightAndFat(reqOne.anthropometry.measurements);\n      }\n    }\n  };\n\n  const PutFirstWightAndFat = measurements => {\n    let find = measurements.find(obj => {\n      return obj.trait.identifier == 2;\n    });\n    if (find != undefined) setFirstWeight(find.value);\n    let find2 = measurements.find(obj => {\n      return obj.trait.identifier == 3;\n    });\n    if (find2 != undefined) setFirstFat(find2.value);\n  };\n\n  const PutLastWightAndFat = measurements => {\n    let find = measurements.find(obj => {\n      return obj.trait.identifier == 2;\n    });\n    if (find != undefined) setLastWeight(find.value);\n    let find2 = measurements.find(obj => {\n      return obj.trait.identifier == 3;\n    });\n    if (find2 != undefined) setLastFat(find2.value);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sty-content-data-1\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"sty-card-title\",\n        children: /*#__PURE__*/_jsx(TagLang, {\n          group: \"dashboard\",\n          tag: \"tit_pacient_2_1\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 sty-cont-form-1\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-3\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"sty-u-cont-pic\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-pic\",\n                id: \"id_pic\",\n                children: [(dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.picture) && /*#__PURE__*/_jsx(\"img\", {\n                  src: dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.picture\n                }), !(dataPatient !== null && dataPatient !== void 0 && dataPatient.picture) && /*#__PURE__*/_jsx(\"img\", {\n                  src: pic\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-9\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"col-8\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-info-tag\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"sty-tag\",\n                    children: /*#__PURE__*/_jsx(TagLang, {\n                      group: \"input\",\n                      tag: \"full_name\"\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"sty-data\",\n                    children: `${dataPatient !== null && dataPatient !== void 0 && dataPatient.firstName ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.firstName : \"\"} ${dataPatient !== null && dataPatient !== void 0 && dataPatient.lastName ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.lastName : \"\"}`\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4\",\n                children: /*#__PURE__*/_jsx(Notes, {})\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"age\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: `${dataPatient !== null && dataPatient !== void 0 && dataPatient.age ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.age : \"\"} ${GetLanguages(\"input\", \"years\")}`\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-5\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"ailment\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: infoPatient.suffering\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsx(SetLink, {\n                      route: `/dashboard/patients/edit`,\n                      params: {\n                        id: query.id\n                      },\n                      children: /*#__PURE__*/_jsxs(\"button\", {\n                        className: \"sty-button-dash-1 fix-25\",\n                        children: [/*#__PURE__*/_jsx(\"div\", {\n                          className: \"sty-icon\",\n                          children: /*#__PURE__*/_jsx(\"img\", {\n                            src: \"/static/img/favicons/app/add_w.svg\"\n                          })\n                        }), /*#__PURE__*/_jsx(\"div\", {\n                          className: \"sty-tag\",\n                          children: /*#__PURE__*/_jsx(TagLang, {\n                            group: \"button\",\n                            tag: \"edit\"\n                          })\n                        })]\n                      })\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"starting_weight\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: firstWeight\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsxs(\"div\", {\n                        className: \"sty-tag\",\n                        children: [/*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"last_weight_1\"\n                        }), \" \", \"(kg)\"]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: lastWeight\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-6\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"reason_consultation\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: infoPatient.reason\n                      })]\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"initial_fat\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: firstFat\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"last_fat\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: lastFat\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-6\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"diet_1\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: alimentPlan\n                      })]\n                    })\n                  })]\n                })\n              })]\n            })\n          })]\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}