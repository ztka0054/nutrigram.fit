{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { size } from \"lodash\";\nimport moment from \"moment\";\nimport useApp from \"../../../../../../hooks/useApp\";\nimport TagLang from \"../../../../../modules/GetTagLang\";\nimport SetLink from \"../../../../../modules/SetLink\";\nimport request from \"../../../../../../helper/core_services/core/requestService\";\nimport patient from \"../../../../../../helper/core_services/endpoints/patients\";\nimport consulation from \"../../../../../../helper/core_services/endpoints/consulation\";\nimport medical from \"../../../../../../helper/core_services/endpoints/medical_records\";\nimport apiMenu from \"../../../../../../helper/core_services/endpoints/menu\";\nimport GetLanguages from \"../../../../../../helper/i18n/getValueTagLang\";\nimport fixDate from \"../../../../../../helper/date/fixDateTimeService\";\nimport Notes from \"./Notes\";\nvar pic = \"/static/img/favicons/app/human.png\";\nexport default function index(_ref) {\n  var dataPatient = _ref.dataPatient;\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useApp = useApp(),\n      locale = _useApp.locale,\n      flagChangeElement = _useApp.flagChangeElement;\n\n  var _useState = useState(pic),\n      statePic = _useState[0],\n      setStatePic = _useState[1]; // const [dataPatient, setDataPatient] = useState({});\n\n\n  var _useState2 = useState({}),\n      infoPatient = _useState2[0],\n      setInfoPatient = _useState2[1];\n\n  var _useState3 = useState(null),\n      alimentPlan = _useState3[0],\n      setAlimentPlan = _useState3[1];\n\n  var _useState4 = useState(null),\n      firstWeight = _useState4[0],\n      setFirstWeight = _useState4[1];\n\n  var _useState5 = useState(null),\n      lastWeight = _useState5[0],\n      setLastWeight = _useState5[1];\n\n  var _useState6 = useState(null),\n      firstFat = _useState6[0],\n      setFirstFat = _useState6[1];\n\n  var _useState7 = useState(null),\n      lastFat = _useState7[0],\n      setLastFat = _useState7[1];\n\n  useEffect(function () {\n    if (dataPatient != null) {\n      GetMenu();\n      GetInfoPatient();\n    }\n  }, [dataPatient]);\n  useEffect(function () {\n    if (dataPatient != null) {\n      GetConsulation();\n    }\n  }, [dataPatient]);\n\n  var GetInfoPatient = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var suffering;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return GetSuffering();\n\n            case 2:\n              suffering = _context.sent;\n              setInfoPatient(_objectSpread({}, suffering));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function GetInfoPatient() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var GetSuffering = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var suffering, reason, req, arraySuffering;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              suffering = \"\";\n              reason = \"\";\n              _context2.next = 4;\n              return request(medical.get_medical, null, [query.id], {\n                locale: locale\n              });\n\n            case 4:\n              req = _context2.sent;\n\n              if (req != null) {\n                arraySuffering = [];\n                if (req !== null && req !== void 0 && req.diarrhea) arraySuffering.push(GetLanguages(\"input\", \"diarrhea\"));\n                if (req !== null && req !== void 0 && req.constipation) arraySuffering.push(GetLanguages(\"input\", \"constipation\"));\n                if (req !== null && req !== void 0 && req.gastritis) arraySuffering.push(GetLanguages(\"input\", \"gastritis\"));\n                if (req !== null && req !== void 0 && req.ulcer) arraySuffering.push(GetLanguages(\"input\", \"ulcer\"));\n                if (req !== null && req !== void 0 && req.nausea) arraySuffering.push(GetLanguages(\"input\", \"nausea\"));\n                if (req !== null && req !== void 0 && req.pyrosis) arraySuffering.push(GetLanguages(\"input\", \"pyrosis\"));\n                if (req !== null && req !== void 0 && req.vomit) arraySuffering.push(GetLanguages(\"input\", \"vomit\"));\n                if (req !== null && req !== void 0 && req.colitis) arraySuffering.push(GetLanguages(\"input\", \"colitis\"));\n                suffering = arraySuffering.join(\", \");\n                if (req !== null && req !== void 0 && req.reason) reason = req.reason;\n              }\n\n              return _context2.abrupt(\"return\", {\n                suffering: suffering,\n                reason: reason\n              });\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function GetSuffering() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var GetMenu = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var req, req1;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(dataPatient.menu != null)) {\n                _context3.next = 9;\n                break;\n              }\n\n              _context3.next = 3;\n              return request(apiMenu.get_menu_patient, null, [dataPatient.menu], {\n                locale: locale\n              });\n\n            case 3:\n              req = _context3.sent;\n\n              if (!(req != null)) {\n                _context3.next = 9;\n                break;\n              }\n\n              _context3.next = 7;\n              return request(apiMenu.get_menu, null, [req.menu], {\n                locale: locale\n              });\n\n            case 7:\n              req1 = _context3.sent;\n              setAlimentPlan(req1.name);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function GetMenu() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var GetConsulation = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var reqFirst, reqLast, reqOne, _reqOne;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return request(consulation.get_consulations, {\n                ordering: \"datetime\",\n                page_size: 1\n              }, [query.id], {\n                locale: locale\n              });\n\n            case 2:\n              reqFirst = _context4.sent;\n              _context4.next = 5;\n              return request(consulation.get_consulations, {\n                ordering: \"-datetime\",\n                datetime__lt: \"\".concat(moment().format(\"YYYY-MM-DD\"), \"T23:59:59\"),\n                page_size: 1\n              }, [query.id], {\n                locale: locale\n              });\n\n            case 5:\n              reqLast = _context4.sent;\n\n              if (!(size(reqFirst.result) > 0)) {\n                _context4.next = 11;\n                break;\n              }\n\n              _context4.next = 9;\n              return request(consulation.get_consulation, null, [query.id, reqFirst.result[0].id], {\n                locale: locale\n              });\n\n            case 9:\n              reqOne = _context4.sent;\n\n              if (reqOne != null) {\n                PutFirstWightAndFat(reqOne.anthropometry.measurements);\n              }\n\n            case 11:\n              if (!(size(reqLast.result) > 0)) {\n                _context4.next = 16;\n                break;\n              }\n\n              _context4.next = 14;\n              return request(consulation.get_consulation, null, [query.id, reqLast.result[0].id], {\n                locale: locale\n              });\n\n            case 14:\n              _reqOne = _context4.sent;\n\n              if (_reqOne != null) {\n                PutLastWightAndFat(_reqOne.anthropometry.measurements);\n              }\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function GetConsulation() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var PutFirstWightAndFat = function PutFirstWightAndFat(measurements) {\n    var find = measurements.find(function (obj) {\n      return obj.trait.identifier == 2;\n    });\n    if (find != undefined) setFirstWeight(find.value);\n    var find2 = measurements.find(function (obj) {\n      return obj.trait.identifier == 3;\n    });\n    if (find2 != undefined) setFirstFat(find2.value);\n  };\n\n  var PutLastWightAndFat = function PutLastWightAndFat(measurements) {\n    var find = measurements.find(function (obj) {\n      return obj.trait.identifier == 2;\n    });\n    if (find != undefined) setLastWeight(find.value);\n    var find2 = measurements.find(function (obj) {\n      return obj.trait.identifier == 3;\n    });\n    if (find2 != undefined) setLastFat(find2.value);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sty-content-data-1\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"sty-card-title\",\n        children: /*#__PURE__*/_jsx(TagLang, {\n          group: \"dashboard\",\n          tag: \"tit_pacient_2_1\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 sty-cont-form-1\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-3\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"sty-u-cont-pic\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"sty-pic\",\n                id: \"id_pic\",\n                children: [(dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.picture) && /*#__PURE__*/_jsx(\"img\", {\n                  src: dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.picture\n                }), !(dataPatient !== null && dataPatient !== void 0 && dataPatient.picture) && /*#__PURE__*/_jsx(\"img\", {\n                  src: pic\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-9\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"col-8\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"sty-info-tag\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"sty-tag\",\n                    children: /*#__PURE__*/_jsx(TagLang, {\n                      group: \"input\",\n                      tag: \"full_name\"\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"sty-data\",\n                    children: \"\".concat(dataPatient !== null && dataPatient !== void 0 && dataPatient.firstName ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.firstName : \"\", \" \").concat(dataPatient !== null && dataPatient !== void 0 && dataPatient.lastName ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.lastName : \"\")\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4\",\n                children: /*#__PURE__*/_jsx(Notes, {})\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"age\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: \"\".concat(dataPatient !== null && dataPatient !== void 0 && dataPatient.age ? dataPatient === null || dataPatient === void 0 ? void 0 : dataPatient.age : \"\", \" \").concat(GetLanguages(\"input\", \"years\"))\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-5\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"ailment\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: infoPatient.suffering\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsx(SetLink, {\n                      route: \"/dashboard/patients/edit\",\n                      params: {\n                        id: query.id\n                      },\n                      children: /*#__PURE__*/_jsxs(\"button\", {\n                        className: \"sty-button-dash-1 fix-25\",\n                        children: [/*#__PURE__*/_jsx(\"div\", {\n                          className: \"sty-icon\",\n                          children: /*#__PURE__*/_jsx(\"img\", {\n                            src: \"/static/img/favicons/app/add_w.svg\"\n                          })\n                        }), /*#__PURE__*/_jsx(\"div\", {\n                          className: \"sty-tag\",\n                          children: /*#__PURE__*/_jsx(TagLang, {\n                            group: \"button\",\n                            tag: \"edit\"\n                          })\n                        })]\n                      })\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"starting_weight\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: firstWeight\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsxs(\"div\", {\n                        className: \"sty-tag\",\n                        children: [/*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"last_weight_1\"\n                        }), \" \", \"(kg)\"]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: lastWeight\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-6\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"reason_consultation\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: infoPatient.reason\n                      })]\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"initial_fat\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: firstFat\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-3\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"last_fat\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: lastFat\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-6\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"sty-info-tag\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-tag\",\n                        children: /*#__PURE__*/_jsx(TagLang, {\n                          group: \"input\",\n                          tag: \"diet_1\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"sty-data\",\n                        children: alimentPlan\n                      })]\n                    })\n                  })]\n                })\n              })]\n            })\n          })]\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}