{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { map } from \"lodash\";\nimport useApp from \"../../../../../hooks/useApp\";\nimport request from \"../../../../../helper/core_services/core/requestService\";\nimport subscription from \"../../../../../helper/core_services/endpoints/subscription\";\nimport numberWithComas from \"../../../../../helper/text/textWithComas\";\nexport default function ListPlan() {\n  var router = useRouter();\n\n  var _useApp = useApp(),\n      locale = _useApp.locale,\n      putObjectSignUp = _useApp.putObjectSignUp,\n      objectsSignUp = _useApp.objectsSignUp;\n\n  var _useState = useState([]),\n      plans = _useState[0],\n      setPlans = _useState[1];\n\n  useEffect(function () {\n    GetPlans();\n  }, [locale]);\n\n  var GetPlans = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var req;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request(subscription.get_subcriptions, null, null, {\n                locale: locale\n              });\n\n            case 2:\n              req = _context.sent;\n              if (req != null) DrawPlans(req);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function GetPlans() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var DrawPlans = function DrawPlans(info) {\n    var colorCont = 0;\n    var elements = map(info, function (element, index) {\n      colorCont++;\n      if (colorCont == 5) colorCont = 1;\n      var description = element.description.split(\"\\r\\n\");\n      var prices = element.prices;\n      var elementsBlank = [];\n      var buttons = prices.map(function (button, indexB) {\n        var price = button.price.amount;\n        elementsBlank.push( /*#__PURE__*/_jsx(\"div\", {\n          className: \"blank\"\n        }));\n        return /*#__PURE__*/_jsxs(\"button\", {\n          className: \"sty-button-dash-1 fix-1 color_3\",\n          onClick: function onClick() {\n            return PutPayElement(element, button);\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"sty-icon\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: \"/static/img/favicons/app/shop_w.svg\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"sty-tag\",\n            children: [\"$\", numberWithComas(parseFloat(price).toFixed(2)), \" \", button.name]\n          })]\n        }, \"button_\".concat(indexB));\n      });\n      description = description.map(function (element, i) {\n        return /*#__PURE__*/_jsx(\"div\", {\n          className: \"sty-tag-1\",\n          children: element\n        });\n      });\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 col-md-4\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"sty-card-price\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center sty-title sty-color-\".concat(colorCont),\n            children: element.name\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"sty-cont-tag\",\n            children: [description, elementsBlank]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center sty-cont-button\",\n            children: buttons\n          })]\n        })\n      }, \"plan_\".concat(index));\n    });\n    setPlans(elements);\n  };\n\n  var PutPayElement = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(plan, subscription) {\n      var params, req;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(parseInt(subscription.price.amount) == 0)) {\n                _context2.next = 10;\n                break;\n              }\n\n              loadElement(true);\n              params = {\n                price: subscription.id\n              };\n              _context2.next = 5;\n              return request(subscription.post_subscription, params, null, {\n                locale: locale\n              }, true, false);\n\n            case 5:\n              req = _context2.sent;\n              loadElement(false);\n\n              if (req != null) {\n                message_1(getTagLang(\"validation\", \"pay_message_1\"));\n                router.push(\"/dashboard\");\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 10:\n              putObjectSignUp(_objectSpread(_objectSpread({}, objectsSignUp), {}, {\n                selectedPlan: plan,\n                selectedSubscritpion: subscription\n              }));\n              router.push(\"/dashboard/profile/plan/pay\");\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function PutPayElement(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: plans\n  });\n}","map":null,"metadata":{},"sourceType":"module"}